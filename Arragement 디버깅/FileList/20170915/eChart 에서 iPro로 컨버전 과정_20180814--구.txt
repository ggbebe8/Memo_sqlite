
## 컨버전 사전작업 ## 
컨버전 할 치과 dbsystem, dentop 디비 복사하여 내자리에서 직접 오류 안나는지 테스트 해본다.


eChart 에서 iPro로 컨버전 과정

1. \\dentop-nas\New_eChart\데이터 컨버젼\09. eChart에서 i-pro로 폴더 복사

2. C:dentop 폴더에 붙여넣기

3. 00_BulkInsert 폴더에 있는 파일들 Dentop폴더 로 빼주기

4. 01_이차트컨버전_INX, 02_이차트컨버전_RX 폴더 안에 SP 차례대로 돌리기

5. 03_컨버전SP실행 폴더 안에 쿼리 순서대로 돌려주기 실행한 행 갯수 확인하기

6. 04_추가스크립트 폴더에 기타 쿼리 돌려주기

7. 05_프로시저및함수스크립트 폴더에 프로시저 및 함수 스크립트 돌려주기

8. 이차트서버 종료 후 
   regedit에서 업데이트 날짜 지정 해주고 (HKEY_LOCAL_MACHINE\SOFTWARE\Dentop -> 우클릭-새로만들기-문자열(Scriptdate)-값데이터에 날짜 20161201 입력)
   아이프로서버 폴더에서 아이프로서버 시작(exe파일 우클릭-속성-호환성탭에서 관리자권한 체크 해주기)

9. 설치사원 이름 넣어주고 확인

9-1. 업데이트 정상적으로 도는지 확인 (sqlcmd창이 깜박깜박 해야함)

10. Update사이트-인증관리-병원사업자번호(select BizNo from Clinic) 로 검색 
   - 설치종류 iPro(차트),인증유효일 2020년으로 변경
   - 맨왼쪽 체크박스 체크 후 상단에 변경내용저장 버튼 클릭

11. 덴탑폴더에 넣어놨던 파일들 삭제처리

12. cmd창에서 'sqlcmd' 명령어 오류 안나는지 확인 후 오류나면 박차장님께 전달 (업데이트시 SP안돌 수 있음)

13. 아이프로 실행해서 오류나는 곳 없는지 체크 후 컨버전 종료


**iPRO 서버로 디비 못붙여준 경우
1. 백업폴더에서 Dentop, dbSystem, dbImage 백업파일 복원
- 복원시 옵션에서 mdf파일 경로 C:Dentop\iPRO Server\DBLog 폴더로 변경

**업데이트시 ()  지정된 파일을 찾을 수 없습니다 에러
1. SqlCmd.exe 찾아서 관리자권한 설정
2. 내컴퓨터-속성-고급시스템설정-고급-환경변수(버튼)-시스템변수칸의 Path 편집-Sqlcmd.exe있는 폴더 경로 있는지 확인
3. Sql Server 구성관리자 -> SQL Native Client 10.0 구성 -> 클라이언트 프로토콜 -> TCP/IP -> 기본포트 51433 으로 변경하고 재부팅 

**기존 sa암호와 다른경우 
  1. conninfo.xml 셋팅파일 내부에 셋팅되어있던 <Server>단의 암호<PW> 안에 내역 지워줌 (암호화되어있는 비번임)
  2. 아이프로 서버 올린 뒤 설정 다시 넣어주고, 저장후 서버 재실행. 
  3. 클라이언트 자리 배치정보도 다 바꾼암호로 저장해줘야함!!!
